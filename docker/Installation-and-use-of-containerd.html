
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>【containerd】containerd的安装和使用 · 运维操作指南</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="vishon">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-page-toc-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-auto-scroll-table/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Docker-limits-the-disk-space-that-containers-can-occupy.html" />
    
    
    <link rel="prev" href="docker-compose-study.html" />
    

    
        <link rel="shortcut icon" href='../favicon.ico' type="image/x-icon">
    
    
        <link rel="bookmark" href='../favicon.ico' type="image/x-icon">
    
    
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"repo":"nieweixing/mybook","types":["star"],"size":"small"};
    </script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://www.niewx.cn" target="_blank" class="custom-link">聂伟星个人博客</a>
        </li>
    
        
        <li>
            <a href="https://cloud.tencent.com/developer/column/87421" target="_blank" class="custom-link">云+社区TKE运维笔记</a>
        </li>
    
        
        <li>
            <a href="https://www.niewx.cn/mybook" target="_blank" class="custom-link">运维操作宝典</a>
        </li>
    
        
        <li>
            <a href="https://www.niewx.cn/question" target="_blank" class="custom-link">运维问题集锦</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    简介
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">如何搭建属于自己的gitbook</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../gitbook/install-gitbook.html">
            
                <a href="../gitbook/install-gitbook.html">
            
                    
                    【gitbook】本地机器安装gitbook
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../gitbook/gitbook-add-note.html">
            
                <a href="../gitbook/gitbook-add-note.html">
            
                    
                    【gitbook】gitbook添加笔记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../gitbook/gitbook-upload-github.html">
            
                <a href="../gitbook/gitbook-upload-github.html">
            
                    
                    【gitbook】gitbook上传到github托管
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../gitbook/gitbook-plugin-usage.html">
            
                <a href="../gitbook/gitbook-plugin-usage.html">
            
                    
                    【gitbook】gitbook插件使用
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">linux运维笔记</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../linux/shell-script-template.html">
            
                <a href="../linux/shell-script-template.html">
            
                    
                    【linux】shell脚本模板
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../linux/cvm-build-openvpn.html">
            
                <a href="../linux/cvm-build-openvpn.html">
            
                    
                    【linux】腾讯云cvm上搭建openvpn
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../linux/vmware-install-centos-set-static-ip-address.html">
            
                <a href="../linux/vmware-install-centos-set-static-ip-address.html">
            
                    
                    【linux】vmware安装centos环境设置静态的ip地址
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../linux/Use-awk-to-extract-field-information.html">
            
                <a href="../linux/Use-awk-to-extract-field-information.html">
            
                    
                    【linux】使用awk处理字段信息
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">数据库运维笔记</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../database/mysql-devops-note.html">
            
                <a href="../database/mysql-devops-note.html">
            
                    
                    【datebase】mysql运维笔记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../database/mongodb-devops-note.html">
            
                <a href="../database/mongodb-devops-note.html">
            
                    
                    【datebase】mongodb运维笔记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../database/redis-devops-note.html">
            
                <a href="../database/redis-devops-note.html">
            
                    
                    【datebase】redis运维笔记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="../database/elasticsearch-devops-note.html">
            
                <a href="../database/elasticsearch-devops-note.html">
            
                    
                    【datebase】elasticsearch运维笔记
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">docker/containerd运维笔记</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="dockerfile-study.html">
            
                <a href="dockerfile-study.html">
            
                    
                    【docker】dockerfile学习笔记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="docker-compose-study.html">
            
                <a href="docker-compose-study.html">
            
                    
                    【docker】docker-compose学习笔记
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="5.3" data-path="Installation-and-use-of-containerd.html">
            
                <a href="Installation-and-use-of-containerd.html">
            
                    
                    【containerd】containerd的安装和使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="Docker-limits-the-disk-space-that-containers-can-occupy.html">
            
                <a href="Docker-limits-the-disk-space-that-containers-can-occupy.html">
            
                    
                    【docker】docker限制容器可占用的磁盘空间
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">kubernetes运维笔记</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../k8s/k8s-common-commands.html">
            
                <a href="../k8s/k8s-common-commands.html">
            
                    
                    【k8s】k8s常用命令总结
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="../k8s/k8s-force-delete-terminating-ns.html">
            
                <a href="../k8s/k8s-force-delete-terminating-ns.html">
            
                    
                    【k8s】强制删除Terminating状态ns
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="../k8s/userd-filebeat-as-sidecar-collect-log.html">
            
                <a href="../k8s/userd-filebeat-as-sidecar-collect-log.html">
            
                    
                    【k8s】k8s中filebeat作为sidecar采集容器日志
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="../k8s/k8s-generate-kubeonfig.html">
            
                <a href="../k8s/k8s-generate-kubeonfig.html">
            
                    
                    【k8s】k8s中生成自定义用户kubeconfig
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.5" data-path="../k8s/kubecm-manages-k8s-clusters.html">
            
                <a href="../k8s/kubecm-manages-k8s-clusters.html">
            
                    
                    【k8s】kubecm管理多k8s集群
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.6" data-path="../k8s/getting-started-with-kustomize-actually.html">
            
                <a href="../k8s/getting-started-with-kustomize-actually.html">
            
                    
                    【k8s】kustomize入门实践
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.7" data-path="../k8s/Use-scripts-to-perform-health-detection-on-pods.html">
            
                <a href="../k8s/Use-scripts-to-perform-health-detection-on-pods.html">
            
                    
                    【k8s】用脚本对pod进行健康探测
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.8" data-path="../k8s/Batch-delete-ns-in-terminating-state-in-the-cluster.html">
            
                <a href="../k8s/Batch-delete-ns-in-terminating-state-in-the-cluster.html">
            
                    
                    【k8s】批量删除集群内terminating状态的ns
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.9" data-path="../k8s/Modify-the-resources-configuration-of-the-container-under-the-namespace.html">
            
                <a href="../k8s/Modify-the-resources-configuration-of-the-container-under-the-namespace.html">
            
                    
                    【k8s】批量修改命名空间下容器的resources配置
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">TKE运维笔记</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../tke/tke-used-docker-in-docker.html">
            
                <a href="../tke/tke-used-docker-in-docker.html">
            
                    
                    【tke】tke上使用docker-in-docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="../tke/tke-deploy-jumpserver.html">
            
                <a href="../tke/tke-deploy-jumpserver.html">
            
                    
                    【tke】tke上部署Jumpserver跳板机
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="../tke/get-the-cbsId-of-pvc-in-the-tke-cluster.html">
            
                <a href="../tke/get-the-cbsId-of-pvc-in-the-tke-cluster.html">
            
                    
                    【tke】获取pvc对应的cbs-id
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.4" data-path="../tke/clean-the-evicted-state-pod-in-the-cluster.html">
            
                <a href="../tke/clean-the-evicted-state-pod-in-the-cluster.html">
            
                    
                    【tke】清除集群中所有的evited状态pod
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.5" data-path="../tke/adjust-workload-replicas-under-the-namespace.html">
            
                <a href="../tke/adjust-workload-replicas-under-the-namespace.html">
            
                    
                    【tke】调整命名空间所有deploy和sts的副本数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.6" data-path="../tke/modify-the-permissions-of-the-container-mount-directory.html">
            
                <a href="../tke/modify-the-permissions-of-the-container-mount-directory.html">
            
                    
                    【tke】如何在非root用户启动的镜像中设置挂载目录权限
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.7" data-path="../tke/The-domain-name-resolved-in-the-alpine-container-exceeds-5s.html">
            
                <a href="../tke/The-domain-name-resolved-in-the-alpine-container-exceeds-5s.html">
            
                    
                    【tke】alpine镜像内解析域名超5s
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.8" data-path="../tke/TKE-redeploys-cert-manager-and-keeps-getting-stuck.html">
            
                <a href="../tke/TKE-redeploys-cert-manager-and-keeps-getting-stuck.html">
            
                    
                    【tke】TKE重新部署cert-manager一直卡主
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">云计算运维笔记</li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="../cloud/1.md">
            
                <span>
            
                    
                    云计算简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2" >
            
                <span>
            
                    
                    aws
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.2.1" data-path="../cloud/aws/awscli-command-operation.html">
            
                <a href="../cloud/aws/awscli-command-operation.html">
            
                    
                    【aws】awscli命令行操作
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.3" >
            
                <span>
            
                    
                    腾讯云
            
                </span>
            

            
        </li>
    

    
        
        <li class="header">prometheus运维笔记</li>
        
        
    
        <li class="chapter " data-level="9.1" data-path="../prometheus/basic-knowledge-of-prometheus.html">
            
                <a href="../prometheus/basic-knowledge-of-prometheus.html">
            
                    
                    【prometheus】prometheus入门知识概念
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="../prometheus/Prometheus-collects-Docker-Engine-Metrics.html">
            
                <a href="../prometheus/Prometheus-collects-Docker-Engine-Metrics.html">
            
                    
                    【prometheus】Prometheus采集Docker Engine Metrics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.3" data-path="../prometheus/Blackbox_exporter-monitoring-url.html">
            
                <a href="../prometheus/Blackbox_exporter-monitoring-url.html">
            
                    
                    【prometheus】使用Blackbox_exporter服务探测
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">istio运维笔记</li>
        
        
    
        <li class="chapter " data-level="10.1" data-path="../istio/istio-annotation-list.html">
            
                <a href="../istio/istio-annotation-list.html">
            
                    
                    【istio】istio注解列表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.2" data-path="../istio/Sidecar-startup-sequence-problem-in-istio.html">
            
                <a href="../istio/Sidecar-startup-sequence-problem-in-istio.html">
            
                    
                    【istio】istio中sidecar启动顺序问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.3" data-path="../istio/istio-traffic-shift.html">
            
                <a href="../istio/istio-traffic-shift.html">
            
                    
                    【istio】istio流量转移实践
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.4" data-path="../istio/istio-multi-cluster-nearby-access.html">
            
                <a href="../istio/istio-multi-cluster-nearby-access.html">
            
                    
                    【istio】istio多集群就近接入
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.5" data-path="../istio/VirtualService-host-configuration-and-use.html">
            
                <a href="../istio/VirtualService-host-configuration-and-use.html">
            
                    
                    【istio】VirtualService中hosts字段的配置使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.6" data-path="../istio/Gateway-configuration-http-forced-to-https.html">
            
                <a href="../istio/Gateway-configuration-http-forced-to-https.html">
            
                    
                    【istio】gateway配置http强转https
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >【containerd】containerd的安装和使用</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="containerd&#x7684;&#x5B89;&#x88C5;&#x548C;&#x4F7F;&#x7528;">containerd&#x7684;&#x5B89;&#x88C5;&#x548C;&#x4F7F;&#x7528;</h1>
<p>Containerd&#x662F;&#x4E00;&#x4E2A;&#x5DE5;&#x4E1A;&#x6807;&#x51C6;&#x7684;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x91CD;&#x70B9;&#x662F;&#x5B83;&#x7B80;&#x6D01;&#xFF0C;&#x5065;&#x58EE;&#xFF0C;&#x4FBF;&#x643A;&#xFF0C;&#x5728;Linux&#x548C;window&#x4E0A;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x7BA1;&#x7406;&#x4E3B;&#x673A;&#x7CFB;&#x7EDF;&#x4E0A;&#x5BB9;&#x5668;&#x7684;&#x5B8C;&#x6574;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#xFF1A;&#x955C;&#x50CF;&#x4F20;&#x8F93;&#x548C;&#x5B58;&#x50A8;&#xFF0C;&#x5BB9;&#x5668;&#x7684;&#x6267;&#x884C;&#x548C;&#x76D1;&#x63A7;&#xFF0C;&#x4F4E;&#x7EA7;&#x522B;&#x7684;&#x5B58;&#x50A8;&#x548C;&#x7F51;&#x7EDC;&#x3002;</p>
<p>containerd&#x548C;docker&#x4E0D;&#x540C;&#xFF0C;containerd&#x91CD;&#x70B9;&#x662F;&#x7EE7;&#x627F;&#x5728;&#x5927;&#x89C4;&#x6A21;&#x7684;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x4F8B;&#x5982;kubernetes&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x9762;&#x5411;&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x8BA9;&#x5F00;&#x53D1;&#x8005;&#x4F7F;&#x7528;&#xFF0C;&#x66F4;&#x591A;&#x7684;&#x662F;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x65F6;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x627F;&#x8F7D;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x3002;</p>
<p>containerd&#x7684;&#x67B6;&#x6784;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="images/containerd.png" alt="upload-image"> </p>
<h2 id="&#x5B89;&#x88C5;containerd">&#x5B89;&#x88C5;containerd</h2>
<p>&#x5B89;&#x88C5;containerd&#x8FD9;&#x91CC;&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#x6765;&#x5FEB;&#x901F;&#x90E8;&#x7F72;&#xFF0C;&#x811A;&#x672C;&#x4F1A;&#x90E8;&#x7F72;containerd&#x548C;crictl&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#x5230;&#x673A;&#x5668;&#x4E0A;&#xFF0C;crictl&#x662F;CRI&#x517C;&#x5BB9;&#x7684;&#x5BB9;&#x5668;&#x8FD0;&#x884C;&#x65F6;&#x547D;&#x4EE4;&#x884C;&#x63A5;&#x53E3;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x64CD;&#x4F5C;containerd&#x7684;&#x955C;&#x50CF;&#x548C;&#x5BB9;&#x5668;&#x7B49;&#x3002;</p>
<p>&#x8FD0;&#x884C;&#x4E0B;&#x9762;&#x811A;&#x672C;&#x9700;&#x8981;&#x586B;&#x5199;2&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x662F;crictl&#x7684;&#x7248;&#x672C;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x586B;&#x5199;containerd&#x7248;&#x672C;&#xFF0C;&#x6CE8;&#x610F;&#x4F20;&#x5165;&#x7684;&#x7248;&#x672C;&#x53F7;&#x9700;&#x8981;&#x53BB;&#x6389;&#x5F00;&#x5934;&#x7684;v&#x3002;</p>
<p>crictl&#x7248;&#x672C;&#x53F7;&#x83B7;&#x53D6;&#x5730;&#x5740;: <a href="https://github.com/kubernetes-sigs/cri-tools/tags" target="_blank">https://github.com/kubernetes-sigs/cri-tools/tags</a></p>
<p>containerd&#x7248;&#x672C;&#x53F7;&#x83B7;&#x53D6;&#x5730;&#x5740;: <a href="https://github.com/containerd/containerd/tags" target="_blank">https://github.com/containerd/containerd/tags</a></p>
<p>crictl &#x9ED8;&#x8BA4;&#x8FDE;&#x63A5;&#x5230; unix:///var/run/dockershim.sock&#x3002; &#x5BF9;&#x4E8E;&#x5176;&#x4ED6;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x7528;&#x591A;&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x65B9;&#x6CD5;&#x8BBE;&#x7F6E;&#x7AEF;&#x70B9;&#xFF1A;</p>
<ul>
<li>&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;&#x53C2;&#x6570; --runtime-endpoint &#x548C; --image-endpoint</li>
<li>&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;&#x73AF;&#x5883;&#x53D8;&#x91CF; CONTAINER_RUNTIME_ENDPOINT &#x548C; IMAGE_SERVICE_ENDPOINT</li>
<li>&#x901A;&#x8FC7;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x8BBE;&#x7F6E;&#x7AEF;&#x70B9; --config=/etc/crictl.yaml</li>
</ul>
<p>&#x4F60;&#x8FD8;&#x53EF;&#x4EE5;&#x5728;&#x8FDE;&#x63A5;&#x5230;&#x670D;&#x52A1;&#x5668;&#x5E76;&#x542F;&#x7528;&#x6216;&#x7981;&#x7528;&#x8C03;&#x8BD5;&#x65F6;&#x6307;&#x5B9A;&#x8D85;&#x65F6;&#x503C;&#xFF0C;&#x65B9;&#x6CD5;&#x662F;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x6307;&#x5B9A; timeout &#x6216; debug &#x503C;&#xFF0C;&#x6216;&#x8005;&#x4F7F;&#x7528; --timeout &#x548C; --debug &#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;&#x3002;</p>
<p>install-containerd.sh&#x5185;&#x5BB9;&#x5982;&#x4E0B;</p>
<pre><code>#!/bin/bash

crictl_version=$1
contained_version=$2

if [ $# = 0 ];then
  echo &quot;Run &apos;sh install-containerd.sh --h&apos; for more information on a command.&quot;
fi

if [[ $1 = &quot;--h&quot; ]];then
  echo &quot;Please enter the first parameter enters the crictl version, the second parameter enters the containerd version

Usage: sh install-containerd.sh [crictl_version] [contained_version]&quot;
fi



main(){
# download crictl client

wget https://github.com/kubernetes-sigs/cri-tools/releases/download/v${crictl_version}/crictl-v${crictl_version}-linux-amd64.tar.gz

tar -C /usr/local/bin -xf crictl-v${crictl_version}-linux-amd64.tar.gz

rm -rf crictl-v${crictl_version}-linux-amd64.tar.gz

# download containerd pkg

wget https://github.com/containerd/containerd/releases/download/v${contained_version}/containerd-${contained_version}-linux-amd64.tar.gz

tar -C /usr/local -xf containerd-${contained_version}-linux-amd64.tar.gz

rm -rf containerd-${contained_version}-linux-amd64.tar.gz

#crictl start config 

cat &lt;&lt; EOF &gt; /etc/crictl.yaml
runtime-endpoint: unix:///run/containerd/containerd.sock
image-endpoint: unix:///run/containerd/containerd.sock
timeout: 10
debug: false
EOF

# create contained config

mkdir -p  /etc/containerd
cd /usr/local/bin/
./containerd config default &gt; /etc/containerd/config.toml

# systemd manager containerd

cat &lt;&lt; EOF &gt;  /lib/systemd/system/containerd.service
[Unit]
Description=containerd container runtime
Documentation=https://containerd.io
After=network.target

[Service]
ExecStartPre=/sbin/modprobe overlay
ExecStart=/usr/local/bin/containerd
Delegate=yes
KillMode=process
LimitNOFILE=1048576
# Having non-zero Limit*s causes performance problems due to accounting overhead
# in the kernel. We recommend using cgroups to do container-local accounting.
LimitNPROC=infinity
LimitCORE=infinity

[Install]
WantedBy=multi-user.target
EOF

# Start containerd and set it to start automatically 

sudo systemctl daemon-reload
sudo systemctl enable containerd.service
sudo systemctl start containerd.service
sudo systemctl status containerd.service

}

if [ $# = 2 ];then

main

fi
</code></pre><p>&#x68C0;&#x67E5;containerd&#x7684;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#xFF0C;&#x5982;&#x679C;&#x63D0;&#x793A;running&#x5219;&#x8BF4;&#x660E;&#x5B89;&#x88C5;&#x6210;&#x529F;</p>
<pre><code>[root@VM-0-13-centos ~]# systemctl status containerd.service
&#x25CF; containerd.service - containerd container runtime
   Loaded: loaded (/usr/lib/systemd/system/containerd.service; enabled; vendor preset: disabled)
   Active: active (running) since Thu 2021-08-19 09:46:45 CST; 2 weeks 0 days ago
     Docs: https://containerd.io
 Main PID: 828192 (containerd)
   CGroup: /system.slice/containerd.service
   ...................
</code></pre><h2 id="crictl&#x5E38;&#x7528;&#x7684;&#x547D;&#x4EE4;">crictl&#x5E38;&#x7528;&#x7684;&#x547D;&#x4EE4;</h2>
<pre><code>[root@VM-0-13-centos ~]# crictl -h
NAME:
   crictl - client for CRI

USAGE:
   crictl [global options] command [command options] [arguments...]

VERSION:
   v1.22.0

COMMANDS:
   attach              Attach to a running container
   create              Create a new container
   exec                Run a command in a running container
   version             Display runtime version information
   images, image, img  List images
   inspect             Display the status of one or more containers
   inspecti            Return the status of one or more images
   imagefsinfo         Return image filesystem info
   inspectp            Display the status of one or more pods
   logs                Fetch the logs of a container
   port-forward        Forward local port to a pod
   ps                  List containers
   pull                Pull an image from a registry
   run                 Run a new container inside a sandbox
   runp                Run a new pod
   rm                  Remove one or more containers
   rmi                 Remove one or more images
   rmp                 Remove one or more pods
   pods                List pods
   start               Start one or more created containers
   info                Display information of the container runtime
   stop                Stop one or more running containers
   stopp               Stop one or more running pods
   update              Update one or more running containers
   config              Get and set crictl client configuration options
   stats               List container(s) resource usage statistics
   completion          Output shell completion code
   help, h             Shows a list of commands or help for one command
</code></pre><p>crictl&#x662F;&#x6CA1;&#x6709;&#x6784;&#x5EFA;&#x547D;&#x4EE4;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x6784;&#x5EFA;&#x955C;&#x50CF;&#x53EF;&#x4EE5;&#x7528;docker&#x6216;&#x8005;&#x7528;buildah&#x5DE5;&#x5177;&#xFF0C;buildah&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x6587;&#x6863;<a href="https://github.com/containers/buildah" target="_blank">https://github.com/containers/buildah</a></p>
<p>containerd&#x4E5F;&#x6709;&#x81EA;&#x5E26;&#x5BA2;&#x6237;&#x7AEF;&#x5DE5;&#x5177;&#xFF0C;&#x53EB;ctr&#xFF0C;&#x6267;&#x884C;ctr&#x547D;&#x4EE4;&#x65F6;&#x9700;&#x8981;&#x5E26;&#x4E0A;--namespace <a href="http://k8s.io&#xFF0C;&#x5EFA;&#x8BAE;&#x8FD8;&#x662F;&#x5B89;&#x88C5;crictl&#x5DE5;&#x5177;&#x64CD;&#x4F5C;&#x3002;" target="_blank">http://k8s.io&#xFF0C;&#x5EFA;&#x8BAE;&#x8FD8;&#x662F;&#x5B89;&#x88C5;crictl&#x5DE5;&#x5177;&#x64CD;&#x4F5C;&#x3002;</a></p>
<h2 id="crictl&#x914D;&#x7F6E;&#x79C1;&#x6709;&#x955C;&#x50CF;&#x4ED3;&#x5E93;">crictl&#x914D;&#x7F6E;&#x79C1;&#x6709;&#x955C;&#x50CF;&#x4ED3;&#x5E93;</h2>
<p>crictl&#x662F;&#x6CA1;&#x6709;login&#x547D;&#x4EE4;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x62C9;&#x53D6;&#x79C1;&#x6709;&#x955C;&#x50CF;&#x4ED3;&#x5E93;&#x7684;&#x955C;&#x50CF;&#xFF0C;&#x9700;&#x8981;&#x5728;containerd&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/containerd/config.toml&#x4E2D;&#x914D;&#x7F6E;&#x79C1;&#x6709;&#x955C;&#x50CF;&#x4ED3;&#x5E93;&#x7684;&#x767B;&#x5F55;&#x4FE1;&#x606F;</p>
<pre><code>[plugins]
    [plugins.cri.registry.mirrors.&quot;ccr.ccs.tencentyun.com&quot;]
      endpoint = [&quot;https://ccr.ccs.tencentyun.com&quot;]

    [plugins.cri.registry.configs.&quot;ccr.ccs.tencentyun.com&quot;.auth]
      username = &quot;xxxxx&quot;
      password = &quot;xxxxx&quot;
</code></pre><p>&#x914D;&#x7F6E;&#x597D;&#x4E4B;&#x540E;&#x5728;&#x91CD;&#x542F;containerd&#x5373;&#x53EF;&#x62C9;&#x53D6;&#x79C1;&#x6709;&#x955C;&#x50CF;</p>
<pre><code># systemctl restart containerd.service
# crictl pull ccr.ccs.tencentyun.com/xxx/xxx:v1
</code></pre><h2 id="&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x52A0;&#x901F;">&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x52A0;&#x901F;</h2>
<p>&#x6709;&#x7684;&#x65F6;&#x5019;&#x4E3A;&#x4E86;&#x80FD;&#x591F;&#x52A0;&#x901F;&#x955C;&#x50CF;&#x7684;&#x62C9;&#x53D6;&#xFF0C;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x52A0;&#x901F;&#x7684;&#x4EE3;&#x7406;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;/etc/containerd/config.toml&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x52A0;&#x901F;</p>
<pre><code>[plugins]
    [plugins.cri.registry.mirrors.&quot;docker.io&quot;]
      endpoint = [&quot;https://mirror.ccs.tencentyun.com&quot;,&quot;https://xxxx.mirror.aliyuncs.com&quot;]
</code></pre><p>&#x914D;&#x7F6E;&#x597D;&#x4E4B;&#x540E;&#x5728;&#x91CD;&#x542F;containerd&#x5373;&#x53EF;&#x751F;&#x6548;</p>
<pre><code># systemctl restart containerd.service
</code></pre><p><footer class="page-footer"><span class="copyright">&#xA9; vishon all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">Updated at
2021-09-02 13:28:23
</span></footer></p>
<div id="gitalk-container"></div>
<script>console.log("plugin-popup....");document.onclick = function(e){ e.target.tagName === "IMG" && window.open(e.target.src,e.target.src)}</script><style>img{cursor:pointer}</style>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="docker-compose-study.html" class="navigation navigation-prev " aria-label="Previous page: 【docker】docker-compose学习笔记">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Docker-limits-the-disk-space-that-containers-can-occupy.html" class="navigation navigation-next " aria-label="Next page: 【docker】docker限制容器可占用的磁盘空间">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"【containerd】containerd的安装和使用","level":"5.3","depth":1,"next":{"title":"【docker】docker限制容器可占用的磁盘空间","level":"5.4","depth":1,"path":"docker/Docker-limits-the-disk-space-that-containers-can-occupy.md","ref":"docker/Docker-limits-the-disk-space-that-containers-can-occupy.md","articles":[]},"previous":{"title":"【docker】docker-compose学习笔记","level":"5.2","depth":1,"path":"docker/docker-compose-study.md","ref":"docker/docker-compose-study.md","articles":[]},"dir":"ltr"},"config":{"plugins":["github","editlink","-lunr","-search","search-plus","tbfed-pagefooter","splitter","page-toc-button","back-to-top-button","-lunr","-search","search-plus","github-buttons@2.1.0","favicon@^0.0.2","3-ba","theme-default","pageview-count","auto-scroll-table","popup","code","mygitalk","-sharing"],"styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"&copy vishon","modify_label":"Updated at","modify_format":"YYYY-MM-DD HH:mm:ss"},"prism":{"css":["prismjs/themes/prism-okaidia.css"]},"disqus":{"shortName":"nieweixing-github-io"},"github":{"url":"https://github.com/nieweixing"},"editlink":{"label":"编辑本页","multilingual":false,"base":"https://github.com/nieweixing/mybook/tree/gh-pages"},"splitter":{},"auto-scroll-table":{},"popup":{},"code":{"copyButtons":true},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"favicon":{"shortcut":"favicon.ico","bookmark":"favicon.ico"},"page-toc-button":{},"back-to-top-button":{},"pageview-count":{},"github-buttons":{"repo":"nieweixing/mybook","types":["star"],"size":"small"},"3-ba":{"configuration":"auto","token":"c03bec8e82bc53c064e0e648ffa54d88"},"mygitalk":{"flipMoveOptions":{},"clientID":"5976cd3d9cc251569467","number":-1,"perPage":10,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","admin":["nieweixing"],"createIssueManually":false,"distractionFreeMode":false,"repo":"gitalk-comment","owner":"nieweixing","enableHotKey":true,"clientSecret":"74117131a57324d4d616267265a94f4a1ac293ec","pagerDirection":"last","labels":["Gitalk"]},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"showLevel":false,"styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"}},"search-plus":{},"image-captions":{"caption":"图片 - _CAPTION_"}},"theme":"default","author":"vishon","pdf":{"pageNumbers":true,"fontSize":11,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"toc":true},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"运维操作指南","language":"zh-hans","links":{"sidebar":{"聂伟星个人博客":"https://www.niewx.cn","云+社区TKE运维笔记":"https://cloud.tencent.com/developer/column/87421","运维操作宝典":"https://www.niewx.cn/mybook","运维问题集锦":"https://www.niewx.cn/question"}},"gitbook":">= 3.2.2","description":"运维操作指南"},"file":{"path":"docker/Installation-and-use-of-containerd.md","mtime":"2021-09-02T05:28:23.647Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-10-21T15:54:14.700Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-editlink/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-page-toc-button/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-3-ba/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-auto-scroll-table/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script>
        
    
        
        <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-mygitalk/mygitalk.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

